import{i as c,Q as k,I,B as L,x as E,q as T,J as v}from"./app-DPfLf0lD.js";function R(){const a=c(),f=c([]),l=c(0),i=c(!0),p=c(0),g=[5,10,20,50],r=c(g[1]),{props:F}=k(),b=I(),y=L(),m=E([{label:"In-active",value:0},{label:"Active",value:1}]),O=F.menu,S=[{field:"name",header:"Name",bodyStyle:"text-align: left;",style:"width: 15%;"},{field:"description",header:"Description",bodyStyle:"text-align: left;",style:"width: 50%;"},{field:"is_active",header:"Status",bodyStyle:"text-align: center;",style:"width: 15%;"},{field:"actions",header:"Action",bodyStyle:"text-align: center;",style:"width: 20%;"}],x=e=>{switch(e){case 0:return"danger";case 1:return"success";default:return""}},A=e=>{const s=m.find(n=>n.value===e);return s?s.label:""},h=()=>{a.value={name:{value:null,matchMode:v.CONTAINS},description:{value:null,matchMode:v.CONTAINS},is_active:{value:null,matchMode:v.EQUALS}}},o=async({page:e,rows:s,sortField:n,sortOrder:u,filters:d})=>{try{i.value=!0;const t=await axios.get("role/get-datatable",{params:{page:e+1,rows:s,sortField:n,sortOrder:u===1?"asc":"desc",filters:d}});f.value=t.data.roles,p.value=t.data.total,i.value=!1}catch(t){i.value=!1,console.error("Error fetching data:",t)}finally{i.value=!1}},C=()=>{h(),o({page:l.value,rows:r.value,sortField:null,sortOrder:null,filters:a.value})};function D(e){l.value=e.page,r.value=e.rows,o({page:l.value,rows:r.value,sortField:e.sortField,sortOrder:e.sortOrder,filters:e.filters})}const N=e=>{l.value=0,r.value=e.rows,o({page:l.value,rows:r.value,sortField:e.sortField,sortOrder:e.sortOrder,filters:a.value})};function M(e,s){a.value[e]?a.value[e].value=s:console.error(`Filter "${e}" tidak ditemukan.`),o({page:l,rows:r,sortField:null,sortOrder:null,filters:a.value})}function $(e){a.value[e]?a.value[e].value=null:console.error(`Filter "${e}" tidak ditemukan.`),o({page:l.value,rows:r.value,sortField:null,sortOrder:null,filters:a.value})}return{columns:S,roles:f,totalRecords:p,filters:a,page:l,rows:r,rowOptions:g,loading:i,loadData:o,initFilters:h,clearFilters:C,onPageChange:D,onSort:N,onFilterApply:M,onFilterClear:$,onMounted:T,handleDelete:async e=>{b.require({message:"Do you want to delete this record?",header:"Danger Zone",icon:"pi pi-info-circle",rejectLabel:"Cancel",acceptLabel:"Delete",rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{var s,n,u,d;try{const t=await axios.delete(`role/delete/${e}`),j=`Delete Role ${((n=(s=t==null?void 0:t.data)==null?void 0:s.role)==null?void 0:n.name)||"N/A"} successfully`;y.add({severity:"success",summary:"Success",detail:j,life:3e3}),await o({page:l.value,rows:r.value,sortField:null,sortOrder:null,filters:a.value})}catch(t){const w=((d=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:d.message)||"An error occurred";y.add({severity:"error",summary:"Error",detail:`${w}`,life:3e3})}},reject:()=>{console.log("you reject")}})},statuses:m,getSeverity:x,getLabel:A,menu:O}}export{R as r};
