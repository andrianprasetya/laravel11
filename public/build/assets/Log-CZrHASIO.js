import{_ as S}from"./AppLayout-CbCoaF9z.js";import{r as u,H as g,x as N,a as M,b as a,w as l,u as T,F as D,f as s,o as O,Z as A,d as c,i as r,t as f}from"./app-Bg9gFmjE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L=c("title",null,"Log",-1),B={class:"col-12"},P={class:"card"},j=c("h5",null,"Log Session",-1),k={class:"flex justify-content-between flex-column sm:flex-row"},G={__name:"Log",setup(E){const o=u({global:{value:null,matchMode:g.CONTAINS},name:{value:null,matchMode:g.CONTAINS},email:{value:null,matchMode:g.CONTAINS},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}}),b=u([]),m=u(!0),x=u(0),V=u(10);u(1);const I=["name","email","created_at","updated_at"],p=async({first:_,rows:t,sortField:y,sortOrder:h,filters:i})=>{try{m.value=!0;const d=await axios.get("/users/get-datatable",{params:{page:_/t+1,rows:t,sortField:y,sortOrder:h===1?"asc":"desc",filters:i}});b.value=d.data.sessions,x.value=d.data.total,m.value=!1}catch(d){m.value=!1,console.error("Error fetching session data:",d)}},w=_=>new Date(_.replace(" ","T")).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}),U=()=>{o.value={global:{value:null,matchMode:"contains"},name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},p({first:0,rows:V.value,sortField:null,sortOrder:null,filters:o.value})};return N(()=>{p({first:0,rows:V.value,sortField:null,sortOrder:null,filters:o.value})}),(_,t)=>{const y=s("Button"),h=s("InputIcon"),i=s("InputText"),d=s("IconField"),v=s("Column"),F=s("Calendar"),C=s("DataTable");return O(),M(D,null,[a(T(A),null,{default:l(()=>[L]),_:1}),a(S,null,{default:l(()=>[c("div",B,[c("div",P,[j,a(C,{value:b.value,paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:o.value,"onUpdate:filters":t[2]||(t[2]=e=>o.value=e),loading:m.value,globalFilterFields:I,filterDisplay:"menu",showGridlines:"",onPage:p,onSort:p},{header:l(()=>[c("div",k,[a(y,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:t[0]||(t[0]=e=>U())}),a(d,{iconPosition:"left"},{default:l(()=>[a(h,{class:"pi pi-search"}),a(i,{modelValue:o.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.global.value=e),placeholder:"Keyword Search",style:{width:"100%"}},null,8,["modelValue"])]),_:1})])]),empty:l(()=>[r(" No customers found. ")]),loading:l(()=>[r(" Loading customers data. Please wait. ")]),default:l(()=>[a(v,{field:"name",header:"IP Address"},{body:l(({data:e})=>[r(f(e.name),1)]),filter:l(({filterModel:e})=>[a(i,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{field:"email",header:"User Agent"},{body:l(({data:e})=>[r(f(e.email),1)]),filter:l(({filterModel:e})=>[a(i,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{field:"created_at",header:"Payload",sortable:"",filter:""},{body:l(({data:e})=>[r(f(w(e.created_at)),1)]),filter:l(({filterModel:e})=>[a(F,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{field:"updated_at",header:"Last Activity",sortable:"",filter:""},{body:l(({data:e})=>[r(f(w(e.updated_at)),1)]),filter:l(({filterModel:e})=>[a(F,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters","loading"])])])]),_:1})],64)}}};export{G as default};
